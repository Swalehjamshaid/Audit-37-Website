# nixpacks.toml â€” WeasyPrint + Python 3.13 fix for Railway
[phases.setup]
  nixPkgs = ["python313", "gcc", "glib", "pango", "cairo", "gdk-pixbuf", "libjpeg", "libpng", "zlib"]
  aptPkgs = [
    "libpango-1.0-0",
    "libpangocairo-1.0-0",
    "libcairo2",
    "libgdk-pixbuf2.0-0",
    "libglib2.0-0",
    "libgirepository-1.0-1",
    "libxml2",
    "libxslt1.1",
    "fonts-dejavu-core",
    "fonts-liberation"
  ]

# Force correct Python version
[start]
  cmd = "gunicorn app:app --bind 0.0.0.0:$PORT --workers 2 --timeout 180"
